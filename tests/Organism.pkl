amends "pkl:test"

import "../src/Organism.pkl" as organism
import "../examples/Organism.pkl" as _examples

facts {
    ["determineIsReference identifies a GCF accession as a reference"] {
        organism.determineIsReference("GCF_000002845.2")
    }

    ["determineIsReference does not identify GCA accession as reference"] {
        !organism.determineIsReference("GCA_000149245.3")
    }

    ["determineIsReference does not identify random strings as reference"] {
        !organism.determineIsReference("foobar")
    }

    ["GenBankRegex matches GCA_* accession"] {
        "GCA_000149245.3".matches(organism.GenBankRegex)
    }

    ["GenBankRegex does not match GCF_* accession"] {
        !"GCF_000002845.2".matches(organism.GenBankRegex)
    }

    ["GenBankRegex does not match random strings"] {
        !"foobar".matches(organism.GenBankRegex)
    }

    // TODO: maybe more robust tests of my awful regex skills
}

// TODO: see if there is a way to test the error about a reference having a genbank accession only

// remember these are like snapshots, each of these will produce a little file 
// and that will be compared to the output of future test runs
examples {
    ["genomes"] {
        _examples.genomes
    }
    
    ["organisms"] {
        _examples.organisms
    }
}